const fs = require("fs");

const filePath = "src/out/zodTypes.ts";

// Read the file
const fileContent = fs.readFileSync(filePath, "utf8");

// Check if the first line contains the expected string
const firstLine = fileContent.trim().split("\n")[0];
if (!firstLine.includes("// Generated by ts-to-zod")) {
  throw new Error(
    "File does not contain the expected string on the first line"
  );
}

// Remove the first line
const newFileContent = fileContent.replace(/.*\n/, "");

// Prepend a new first line with the autogeneration warning
const finalFileContent = `//AUTOGENERATED FILE - DO NOT EDIT MANUALLY\n${newFileContent}`;

// Write the updated content back to the file
fs.writeFileSync(filePath, finalFileContent);
